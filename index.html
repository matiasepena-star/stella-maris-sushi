<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sushi Stella Maris</title>
  <style>
    :root{
      --bg:#0f0f12;
      --card:#17171c;
      --card2:#1d1d23;
      --text:#f3f3f6;
      --muted:#b8b8c6;
      --line:#2a2a33;
      --gold:#d8b26b;
      --gold2:#b88b3c;
      --danger:#ff6b6b;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(1200px 600px at 20% -10%, rgba(216,178,107,.16), transparent 60%),
                  radial-gradient(900px 500px at 90% 0%, rgba(216,178,107,.10), transparent 55%),
                  var(--bg);
      color:var(--text);
    }
    .wrap{max-width:920px;margin:0 auto;padding:14px 14px 110px}
    header{
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      padding:8px 2px 10px;
    }
    .title{
      font-weight:800;letter-spacing:.2px;font-size:18px;
    }
    .badge{
      color:var(--gold);
      border:1px solid rgba(216,178,107,.35);
      background:rgba(216,178,107,.08);
      padding:6px 10px;border-radius:999px;
      font-size:12px;white-space:nowrap;
    }

    /* Tabs: one line */
    .tabs{
      display:flex;gap:8px;flex-wrap:nowrap;overflow:auto;
      padding:8px 2px 12px;
      -webkit-overflow-scrolling:touch;
    }
    .tab{
      flex:0 0 auto;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--text);
      padding:10px 12px;border-radius:12px;
      font-weight:700;font-size:13px;
      display:flex;align-items:center;gap:8px;
      cursor:pointer;user-select:none;
      box-shadow: 0 1px 0 rgba(255,255,255,.06) inset;
    }
    .tab:active{transform:translateY(1px)}
    .tab.active{
      border-color:rgba(216,178,107,.55);
      background:rgba(216,178,107,.12);
      color:var(--gold);
      box-shadow: 0 0 0 3px rgba(216,178,107,.12);
    }

    /* Grid */
    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    @media (min-width:760px){ .grid{grid-template-columns:repeat(3,minmax(0,1fr));} }

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
      border:1px solid var(--line);
      border-radius:16px;
      overflow:hidden;
      box-shadow: 0 12px 28px rgba(0,0,0,.25);
    }

    /* Image area smaller (won't stretch too much) */
    .media{
      height:118px; /* <-- m√°s chica */
      background:linear-gradient(120deg, rgba(216,178,107,.10), rgba(255,255,255,.02));
      border-bottom:1px solid rgba(255,255,255,.06);
      display:flex;align-items:center;justify-content:center;
      position:relative;
      cursor:pointer;
    }
    .media img{
      width:100%;height:100%;
      object-fit:cover;
      display:block;
      filter:saturate(1.05);
    }
    .zoomHint{
      position:absolute;right:10px;top:10px;
      font-size:11px;color:rgba(255,255,255,.85);
      background:rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.18);
      padding:5px 8px;border-radius:999px;
      backdrop-filter: blur(6px);
    }

    .content{padding:12px}
    .nameRow{display:flex;align-items:flex-start;justify-content:space-between;gap:10px}
    .name{font-weight:900;font-size:14px;line-height:1.1}
    .price{font-weight:900;color:var(--gold);white-space:nowrap}
    .desc{margin-top:6px;color:var(--muted);font-size:12px;line-height:1.35;min-height:32px}
    .meta{margin-top:8px;display:flex;align-items:center;justify-content:space-between;gap:10px}
    .chip{
      font-size:12px;font-weight:800;
      color:rgba(255,255,255,.9);
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
      padding:6px 10px;border-radius:999px;
      white-space:nowrap;
    }
    /* White chip with gold hover (your "Una X" style) */
    .btn{
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.92);
      color:#141416;
      padding:10px 12px;border-radius:12px;
      font-weight:900;font-size:13px;
      cursor:pointer;user-select:none;
      box-shadow: 0 2px 0 rgba(0,0,0,.22);
      display:flex;align-items:center;justify-content:center;
      min-width:90px;
    }
    .btn:hover{
      background:rgba(216,178,107,.92);
      border-color:rgba(216,178,107,.65);
    }
    .btn:active{
      transform:translateY(2px);
      box-shadow: 0 0 0 rgba(0,0,0,0);
    }

    /* Cart bar */
    .cartBar{
      position:fixed;left:0;right:0;bottom:0;
      background:rgba(15,15,18,.92);
      border-top:1px solid rgba(216,178,107,.25);
      backdrop-filter: blur(10px);
    }
    .cartInner{
      max-width:920px;margin:0 auto;padding:12px 14px;
      display:flex;flex-direction:column;gap:10px;
    }
    .cartTop{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .totals{
      display:flex;gap:10px;flex-wrap:wrap;align-items:center;
      color:var(--muted);font-size:12px;
    }
    .totals b{color:var(--text)}
    .ctaRow{
      display:flex;gap:10px;align-items:center;justify-content:space-between;
    }
    .cartBtn{
      flex:1;
      border:1px solid rgba(216,178,107,.55);
      background:rgba(216,178,107,.14);
      color:var(--gold);
      padding:12px 12px;border-radius:14px;
      font-weight:900;font-size:14px;
      cursor:pointer;user-select:none;
      box-shadow: 0 0 0 3px rgba(216,178,107,.08);
    }
    .cartBtn:active{transform:translateY(2px)}
    .clearBtn{
      width:110px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.06);
      color:rgba(255,255,255,.9);
      padding:12px 10px;border-radius:14px;
      font-weight:900;cursor:pointer;user-select:none;
    }
    .clearBtn:active{transform:translateY(2px)}

    /* Selected extras preview bottom */
    .selectedLine{
      display:flex;flex-wrap:wrap;gap:8px;
      color:var(--muted);font-size:12px;
    }
    .pill{
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.04);
      padding:6px 10px;border-radius:999px;
      color:rgba(255,255,255,.92);
    }
    .pill.gold{
      border-color:rgba(216,178,107,.35);
      background:rgba(216,178,107,.10);
      color:var(--gold);
    }

    /* Modal image (DIRECT, no animation) */
    .modal{
      position:fixed;inset:0;background:rgba(0,0,0,.78);
      display:none;align-items:center;justify-content:center;
      padding:16px;z-index:50;
    }
    .modal.open{display:flex;}
    .modalBox{
      width:min(520px, 100%);
      background:rgba(20,20,24,.95);
      border:1px solid rgba(216,178,107,.35);
      border-radius:16px;overflow:hidden;
      box-shadow: 0 24px 70px rgba(0,0,0,.55);
    }
    .modalBox img{width:100%;height:auto;display:block}
    .modalHead{
      display:flex;align-items:center;justify-content:space-between;
      padding:10px 12px;border-bottom:1px solid rgba(255,255,255,.08);
      color:var(--text);
    }
    .x{
      border:1px solid rgba(255,255,255,.2);
      background:rgba(255,255,255,.06);
      color:rgba(255,255,255,.9);
      width:34px;height:34px;border-radius:10px;
      cursor:pointer;font-weight:900;
    }
    .x:active{transform:translateY(2px)}

    /* Simple section note */
    .note{
      margin:6px 2px 2px;
      color:rgba(255,255,255,.70);
      font-size:12px;
    }
    .note b{color:var(--gold)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">Sushi Stella Maris</div>
      <div class="badge">Soja incluida ‚úîÔ∏é</div>
    </header>

    <div class="tabs" id="tabs"></div>

    <div class="note" id="note"></div>

    <div class="grid" id="grid"></div>
  </div>

  <!-- Cart bar -->
  <div class="cartBar">
    <div class="cartInner">
      <div class="cartTop">
        <div class="totals">
          <span>Total piezas: <b id="totalPieces">0</b></span>
          <span>Total: <b id="totalPrice">$ 0</b></span>
        </div>
        <div class="totals">
          <span>Incluye: <b>Wasabi + Pepino + Jengibre + Soja</b></span>
        </div>
      </div>

      <div class="selectedLine" id="selectedExtrasLine">
        <span class="pill gold">Salsas/Adicionales: ‚Äî</span>
      </div>

      <div class="ctaRow">
        <button class="clearBtn" id="clearBtn">Vaciar</button>
        <button class="cartBtn" id="copyBtn">Copiar pedido</button>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modalBox">
      <div class="modalHead">
        <div id="modalTitle" style="font-weight:900"></div>
        <button class="x" id="modalClose">‚úï</button>
      </div>
      <img id="modalImg" alt="preview" />
    </div>
  </div>

  <script>
    // ===========
    // DATA (placeholder: vos despu√©s me pas√°s ‚Äúlo que lleva cada gusto‚Äù)
    // Reglas:
    // - Rolls/Makis/Niguiris/Sashimis: x5
    // - Salsas/Adicionales: x1
    // - Combos: piezas fijas (10/15/20/30/40/50)
    // - Soja incluida siempre; elecciones seg√∫n combo
    // ===========
    const catalog = {
      rolls: {
        label: "Rolls",
        note: "Cada roll es <b>x5</b> piezas.",
        items: [
          { id:"philadelphia", name:"Philadelphia", piecesEach:5, price:9000, desc:"Salm√≥n fresco + queso crema.", img:"philadelphia.PNG" },
          { id:"buenosaires", name:"Buenos Aires", piecesEach:5, price:11000, desc:"Langostino + queso + palta, con salsa BA.", img:"buenos-aires.PNG" },
          { id:"guacamoleRoll", name:"Guacamole", piecesEach:5, price:10500, desc:"Salm√≥n + queso con topping guacamole.", img:"guacamole .PNG" },
        ]
      },
      combos: {
        label: "Combos",
        note: "Soja incluida. Wasabi + pepino + jengibre incluidos. Salsas extra seg√∫n combo.",
        items: [
          {
            id:"c10", name:"Combo 10 piezas", pieces:10, price:16000,
            desc:"Incluye: 1 salsa (Soja fija) + 1 a elecci√≥n (seg√∫n reglas).",
            img:null,
            rules:{ includedSoja:true, extraSauces:0, choiceSauces:1 } // 10 -> 1 elecci√≥n
          },
          {
            id:"c15", name:"Combo 15 piezas", pieces:15, price:22000,
            desc:"Incluye: Soja fija + 1 salsa/adicional a elecci√≥n.",
            img:null,
            rules:{ includedSoja:true, extraSauces:0, choiceSauces:1 } // 15 -> 1 elecci√≥n
          },
          {
            id:"c20", name:"Combo 20 piezas", pieces:20, price:28000,
            desc:"Incluye: Soja fija + 1 salsa/adicional a elecci√≥n.",
            img:null,
            rules:{ includedSoja:true, extraSauces:0, choiceSauces:1 } // 20 -> 1 elecci√≥n
          },
          {
            id:"c30", name:"Combo 30 piezas", pieces:30, price:40000,
            desc:"Incluye: Soja fija + 1 salsa/adicional a elecci√≥n.",
            img:null,
            rules:{ includedSoja:true, extraSauces:0, choiceSauces:1 } // 30 -> 1 elecci√≥n
          },
          {
            id:"c40", name:"Combo 40 piezas", pieces:40, price:0,
            desc:"Incluye: Soja fija + 2 salsas/adicionales + 1 a elecci√≥n.",
            img:null,
            rules:{ includedSoja:true, extraSauces:2, choiceSauces:1 } // 40 -> 2 + 1 elecci√≥n
          },
          {
            id:"c50", name:"Combo 50 piezas", pieces:50, price:0,
            desc:"Incluye: Soja fija + 2 salsas/adicionales + 2 a elecci√≥n.",
            img:null,
            rules:{ includedSoja:true, extraSauces:2, choiceSauces:2 } // 50 -> 2 + 2 elecci√≥n
          },
        ]
      },
      salsas: {
        label: "Salsas y adicionales",
        note: "Salsas y adicionales van <b>de a 1</b>.",
        items: [
          { id:"soja", name:"Salsa de Soja", piecesEach:0, price:850, desc:"Cl√°sica (ya viene incluida en sushi/combos).", img:"salsa-de-soja.PNG", type:"salsa" },
          { id:"maracuya", name:"Salsa Maracuy√°", piecesEach:0, price:1500, desc:"Dulce y √°cida.", img:"salsa-de-maracuya.PNG", type:"salsa" },
          { id:"ba", name:"Salsa Buenos Aires", piecesEach:0, price:1300, desc:"Toque intenso.", img:"salsa -buenos-aires.PNG", type:"salsa" },
          { id:"guac", name:"Guacamole", piecesEach:0, price:850, desc:"Extra de guacamole.", img:"salsa-guacamole .PNG", type:"adic" },
          { id:"jeng", name:"Jengibre", piecesEach:0, price:750, desc:"Extra jengibre.", img:"jengibre .PNG", type:"adic" },
          { id:"pep", name:"Pepino", piecesEach:0, price:700, desc:"Extra pepino.", img:"pepino.PNG", type:"adic" },
        ]
      }
    };

    // Map file names to relative paths (si lo prob√°s local: pon√© las im√°genes en misma carpeta)
    function imgPath(file){ return file ? `./${file}` : null; }

    // ===========
    // UI
    // ===========
    const tabsEl = document.getElementById("tabs");
    const gridEl = document.getElementById("grid");
    const noteEl = document.getElementById("note");

    const modal = document.getElementById("modal");
    const modalImg = document.getElementById("modalImg");
    const modalTitle = document.getElementById("modalTitle");
    const modalClose = document.getElementById("modalClose");

    const totalPiecesEl = document.getElementById("totalPieces");
    const totalPriceEl = document.getElementById("totalPrice");
    const selectedExtrasLine = document.getElementById("selectedExtrasLine");

    const clearBtn = document.getElementById("clearBtn");
    const copyBtn = document.getElementById("copyBtn");

    const state = {
      tab: "rolls",
      cart: new Map(), // key -> {id,name,qty,price,piecesEach|pieces,kind}
    };

    const tabs = [
      { key:"combos", label:"Combos" },
      { key:"rolls", label:"Rolls" },
      { key:"salsas", label:"Salsas" },
    ];

    function money(n){
      return "$ " + (n||0).toLocaleString("es-AR");
    }

    function setTab(key){
      state.tab = key;
      [...tabsEl.querySelectorAll(".tab")].forEach(b=>{
        b.classList.toggle("active", b.dataset.key===key);
      });
      noteEl.innerHTML = catalog[key].note || "";
      renderGrid();
    }

    function renderTabs(){
      tabsEl.innerHTML = "";
      tabs.forEach(t=>{
        const b = document.createElement("button");
        b.className = "tab";
        b.dataset.key = t.key;
        b.textContent = t.label;
        b.onclick = ()=>setTab(t.key);
        tabsEl.appendChild(b);
      });
      setTab(state.tab);
    }

    function addToCart(item, kind){
      const key = `${kind}:${item.id}`;
      const existing = state.cart.get(key);
      if(existing){
        existing.qty += 1;
      } else {
        state.cart.set(key, {
          id:item.id,
          name:item.name,
          qty:1,
          price:item.price || 0,
          kind,
          piecesEach: item.piecesEach ?? 0,
          pieces: item.pieces ?? 0,
        });
      }
      renderTotals();
    }

    function clearCart(){
      state.cart.clear();
      renderTotals();
    }

    function totalPieces(){
      let sum = 0;
      state.cart.forEach(v=>{
        if(v.kind==="rolls"){
          sum += v.qty * (v.piecesEach||0);
        } else if(v.kind==="combos"){
          sum += v.qty * (v.pieces||0);
        }
        // salsas/adicionales no suman piezas
      });
      return sum;
    }

    function totalPrice(){
      let sum = 0;
      state.cart.forEach(v=>{
        sum += v.qty * (v.price||0);
      });
      return sum;
    }

    function listSelectedExtras(){
      const extras = [];
      state.cart.forEach(v=>{
        if(v.kind==="salsas"){
          extras.push(`${v.qty}x ${v.name}`);
        }
      });
      return extras;
    }

    function renderTotals(){
      totalPiecesEl.textContent = totalPieces();
      totalPriceEl.textContent = money(totalPrice());

      const extras = listSelectedExtras();
      selectedExtrasLine.innerHTML = "";
      const base = document.createElement("span");
      base.className = "pill gold";
      base.textContent = "Salsas/Adicionales: " + (extras.length ? extras.join(" ‚Ä¢ ") : "‚Äî");
      selectedExtrasLine.appendChild(base);
    }

    function openModal(title, img){
      modalTitle.textContent = title;
      modalImg.src = img;
      modal.classList.add("open"); // DIRECTO (sin animaci√≥n)
    }
    function closeModal(){
      modal.classList.remove("open");
      modalImg.src = "";
    }
    modalClose.onclick = closeModal;
    modal.onclick = (e)=>{ if(e.target===modal) closeModal(); };

    function renderGrid(){
      const cat = catalog[state.tab];
      gridEl.innerHTML = "";
      cat.items.forEach(item=>{
        const card = document.createElement("div");
        card.className = "card";

        // media
        const media = document.createElement("div");
        media.className = "media";

        if(item.img){
          const img = document.createElement("img");
          img.src = imgPath(item.img);
          img.alt = item.name;
          media.appendChild(img);

          const hint = document.createElement("div");
          hint.className = "zoomHint";
          hint.textContent = "Tocar para agrandar";
          media.appendChild(hint);

          media.onclick = ()=>openModal(item.name, imgPath(item.img));
        } else {
          // placeholder for combos without photo
          media.style.cursor = "default";
          media.innerHTML = `<div style="padding:12px;text-align:center;color:rgba(255,255,255,.7);font-weight:800">
            ${item.pieces} piezas
            <div style="margin-top:6px;color:rgba(216,178,107,.85);font-weight:900">Combo</div>
          </div>`;
        }

        // content
        const c = document.createElement("div");
        c.className = "content";

        const nameRow = document.createElement("div");
        nameRow.className = "nameRow";

        const name = document.createElement("div");
        name.className = "name";
        name.textContent = item.name;

        const price = document.createElement("div");
        price.className = "price";
        price.textContent = money(item.price || 0);

        nameRow.appendChild(name);
        nameRow.appendChild(price);

        const desc = document.createElement("div");
        desc.className = "desc";
        desc.textContent = item.desc || "";

        const meta = document.createElement("div");
        meta.className = "meta";

        const chip = document.createElement("div");
        chip.className = "chip";
        if(state.tab==="rolls"){
          chip.textContent = "x5";
        } else if(state.tab==="combos"){
          chip.textContent = `${item.pieces} piezas`;
        } else {
          chip.textContent = "x1";
        }

        const btn = document.createElement("button");
        btn.className = "btn";
        btn.textContent = "+ Agregar";
        btn.onclick = ()=>addToCart(item, state.tab);

        meta.appendChild(chip);
        meta.appendChild(btn);

        c.appendChild(nameRow);
        c.appendChild(desc);
        c.appendChild(meta);

        card.appendChild(media);
        card.appendChild(c);
        gridEl.appendChild(card);
      });
    }

    function buildOrderMessage(){
      // Formato como el tuyo (para que no confunda piezas)
      const rollsLines = [];
      const comboLines = [];
      const extrasLines = [];

      state.cart.forEach(v=>{
        if(v.kind==="rolls"){
          const pieces = v.qty * v.piecesEach;
          rollsLines.push(`${v.qty}x ${v.name} x5 ‚Äì ${pieces} piezas`);
        } else if(v.kind==="combos"){
          const pieces = v.qty * v.pieces;
          comboLines.push(`${v.qty}x ${v.name} ‚Äì ${pieces} piezas`);
        } else if(v.kind==="salsas"){
          extrasLines.push(`${v.qty}x ${v.name}`);
        }
      });

      const lines = [];
      lines.push("Hola Stella Maris Sushi üç£");
      lines.push("");
      lines.push("Quiero pedir:");
      lines.push("");
      lines.push("üç£ Sushi:");
      if(rollsLines.length) rollsLines.forEach(l=>lines.push(l));
      if(comboLines.length) comboLines.forEach(l=>lines.push(l));
      if(!rollsLines.length && !comboLines.length) lines.push("‚Äî");

      lines.push("");
      lines.push("ü•£ Salsas y adicionales:");
      if(extrasLines.length) extrasLines.forEach(l=>lines.push(l));
      else lines.push("‚Äî");

      lines.push("");
      lines.push(`Total de piezas: ${totalPieces()}`);
      lines.push(`Total: ${money(totalPrice())}`);
      lines.push("");
      lines.push("Retiro en el local.");
      return lines.join("\n");
    }

    copyBtn.onclick = async ()=>{
      const msg = buildOrderMessage();
      try{
        await navigator.clipboard.writeText(msg);
        copyBtn.textContent = "¬°Copiado!";
        setTimeout(()=>copyBtn.textContent="Copiar pedido", 900);
      }catch{
        alert("No pude copiar. Te lo dejo para copiar manual:\n\n" + msg);
      }
    };

    clearBtn.onclick = clearCart;

    // Init
    renderTabs();
    renderTotals();
  </script>
</body>
</html>
